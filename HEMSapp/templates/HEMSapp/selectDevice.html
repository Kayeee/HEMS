<!DOCTYPE HTML>
{% load staticfiles %}

<html>
<head>
  <title>HEMS</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

  <link rel="stylesheet" href="{% static "css/main.css" %}"/>
  <link rel="stylesheet" href="{% static "css/customs.css" %}"/>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <script>
  function check_field_value(){
    if($(this).val() == 'Custom_Command_Input'){
      $('#custom').show();
    }
    else{
      $('#custom').hide();
    }
  }

  $(document).ready(function(){
    $('#hems_devices').find('select').change(function(){
      check_field_value.call($('#hems_devices').find('select'));
    });
  });
  </script>
</head>

<body>
  <form method="post" action="/hems/select_device/">{% csrf_token %}
    <label for="hems_method">HEMS Method:</label>
    <select name="hems_method">
      <option value="read">Read</option>
      <option value="write">Write</option>
    </select>
    <br>
    <label for="hems_devices">HEMS Device:</label>
    <div id="hems_devices">
      <select name="hems_devices">
        <optgroup label="Custom">
          <option value="Custom_Command_Input">Custom Command Input</option>
        </optgroup>
        <optgroup label="Date and Time">
          <optgroup label="Date">
            <option value="OutBack_Day">OutBack_Day</option>
            <option value="OutBack_Month">OutBack_Month</option>
            <option value="OutBack_Year">OutBack_Year</option>
          </optgroup>
          <optgroup label="Time">
            <option value="OutBack_Hour">OutBack_Hour</option>
            <option value="OutBack_Minute">OutBack_Minute</option>
            <option value="OutBack_Second">OutBack_Second</option>
          </optgroup>
        </optgroup>

        <optgroup label="System Type">
          <optgroup label="System type: Off-grid, Grid-tie, Backup"></optgroup>
          <optgroup label="System voltage(V)">
            <option value="OutBack_System_Voltage">OutBack_System_Voltage(READ ONLY)</option>
            <option value="OutBack_Measured_System_Voltage">OutBack_Measured_System_Voltage(Current system battery voltage computed by gateway)</option>
          </optgroup>
          <optgroup label="Solar array wattage(W)"></optgroup>
          <optgroup label="Battery type: FLA, AGM, Gel"></optgroup>
        </optgroup>

        <optgroup label="Battery Charging Characteristics">
          <optgroup label="Absorb voltage(V)">
            <option value="GSconfig_Absorb_Volts">GSconfig_Absorb_Volts</option>
            <option value="GSconfig_Absorb_Time_Hours">GSconfig_Absorb_Time_Hours</option>
          </optgroup>
          <optgroup label="Float voltage(V)">
            <option value="GSconfig_Float_Volts">GSconfig_Float_Volts</option>
            <option value="GSconfig_Float_Time_Hours">GSconfig_Float_Time_Hours</option>
          </optgroup>
          <optgroup label="Equalize voltage(V)">
            <option value="GSconfig_EQ_Volts">GSconfig_EQ_Volts</option>
            <option value="GSconfig_EQ_Time_Hours">GSconfig_EQ_Time_Hours</option>
          </optgroup>
          <optgroup label="Refloat voltage(V)">
            <option value="GSconfig_ReFloat_Volts">GSconfig_ReFloat_Volts</option>
          </optgroup>
        </optgroup>

        <optgroup label="AC Configuration">
          <optgroup label="AC output voltage(V)">
            <option value="GSconfig_AC_Output_Voltage">GSconfig_AC_Output_Voltage</option>
          </optgroup>
          <optgroup label="AC phase: Single, split, 3-phase">
            <option value="GSconfig_Stacking_Mode">GSconfig_Stacking_Mode</option>
          </optgroup>
          <optgroup label="AC input breaker size">
            <option value="GSconfig_AC_Input_Select_Priority">GSconfig_AC_Input_Select_Priority(0=Grid, 1=Gen)</option>
            <option value="GSconfig_Grid_AC_Input_Current_Limit">GSconfig_Grid_AC_Input_Current_Limit</option>
            <option value="GSconfig_Gen_AC_Input_Current_Limit">GSconfig_Gen_AC_Input_Current_Limit</option>
          </optgroup>
          <optgroup label="Maximum output load(A)-No Current Register"></optgroup>
        </optgroup>

        <optgroup label="n">
          <optgroup label="Grid lower voltage(V)">
            <option value="GSconfig_Grid_Lower_Input_Voltage_Limit">GSconfig_Grid_Lower_Input_Voltage_Limit</option>
          </optgroup>
          <optgroup label="Grid upper voltage(V)">
            <option value="GSconfig_Grid_Upper_Input_Voltage_Limit">GSconfig_Grid_Upper_Input_Voltage_Limit</option>
            <option value="GSconfig_Grid_Transfer_Delay">GSconfig_Grid_Transfer_Delay</option>
            <option value="GSconfig_Grid_Connect_Delay">GSconfig_Grid_Connect_Delay</option>
          </optgroup>
          <optgroup label="Generator lower voltage(V)">
            <option value="GSconfig_Gen_Lower_Input_Voltage_Limit">GSconfig_Gen_Lower_Input_Voltage_Limit</option>
          </optgroup>
        </optgroup>

        <optgroup label="Generator Configuration">
          <optgroup label="Grid input mode">
            <option value="GSconfig_Grid_Input_Mode">GSconfig_Grid_Input_Mode</option>
          </optgroup>
          <optgroup label="Generator upper voltage(V)">
            <option value="GSconfig_Gen_Upper_Input_Voltage_Limit">GSconfig_Gen_Upper_Input_Voltage_Limit</option>
            <option value="GSconfig_Gen_Transfer_Delay">GSconfig_Gen_Transfer_Delay</option>
            <option value="GSconfig_Gen_Connect_Delay">GSconfig_Gen_Connect_Delay</option>
          </optgroup>
          <optgroup label="Generator input mode">
            <option value="GSconfig_Gen_Input_Mode">GSconfig_Gen_Input_Mode</option>
          </optgroup>
          <optgroup label="Generator size(kW)"></optgroup>
          <optgroup label="Start type: Manual, auto">
            <option value="OutBack_AGS_Mode">OutBack_AGS_Mode(0=Disabled, 1=Enabled)</option>
          </optgroup>
          <optgroup label="Inverter or charge controller">
            <option value="FNconfig_Shunt_A_Enabled">FNconfig_Shunt_A_Enabled(0=Enabled, 1=Disabled)</option>
          </optgroup>
        </optgroup>
        <optgroup label="Battery Monitor Connection"></optgroup>
      </select>
    </div>
    <br>
    <div id="custom">
      <label for="hems_custom">HEMS Custom Input:</label>
      <input type="text" name="hems_custom" style="color:black;"></input>
    </div>
    <br>
    <label for="hems_value">HEMS Value:</label>
    <input type="number" name="hems_value" style="color: black;"></input>
    <button type="submit" class="button">Submit</button>
  </form>
</body>
</html>
